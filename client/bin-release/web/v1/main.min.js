var __reflect=this&&this.__reflect||function(t,e,r){t.__class__=e,r?r.push(e):r=[e],t.__types__=t.__types__?r.concat(t.__types__):r},__extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])};return function(e,r){function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),UIBase=function(t){function e(){var e=t.call(this)||this;return e.list=[],e}return __extends(e,t),e.prototype.bind=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.list=t,UIManager.getInstance().addMul(t,this)},e.prototype.unBind=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];UIManager.getInstance().removeMul(t,this),this.list=[]},e.prototype.dispatch=function(t,e,r){MsgCenter.getInstance().dispatch(t,e,r)},e.prototype.execute=function(t,e){console.log(t,e)},e.prototype.onDestory=function(){null!=this.list&&this.unBind()},e}(eui.Component);__reflect(UIBase.prototype,"UIBase",["IBase"]);var MatchRoomDto=function(){function t(){this.uidUserDict={},this.readyUidList=[],this.uidList=[]}return t.prototype.setData=function(t){this.uidList=t.uidList,this.readyUidList=t.readyUidList,this.uidUserDict=t.uidUserDict},t.prototype.add=function(t){this.uidUserDict[t.id]=t,this.uidList.push(t.id)},t.prototype.leave=function(t){delete this.uidUserDict[t],this.uidList=this.uidList.filter(function(e,r){return e!=t})},t.prototype.hasReady=function(t){return-1!=this.readyUidList.indexOf(t)},t.prototype.ready=function(t){this.readyUidList.push(t)},t.prototype.resetPos=function(t){var e=-1,r=-1;1==this.uidList.length||(2==this.uidList.length?this.uidList[0]==t?r=this.uidList[1]:this.uidList[1]==t&&(e=this.uidList[0]):3==this.uidList.length&&(this.uidList[0]==t?(e=this.uidList[2],r=this.uidList[1]):this.uidList[1]==t?(e=this.uidList[0],r=this.uidList[2]):this.uidList[2]==t&&(e=this.uidList[1],r=this.uidList[0]))),this.leftId=e,this.rightId=r},t}();__reflect(MatchRoomDto.prototype,"MatchRoomDto");var PopUpBase=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.close=function(){var t=this.parent;t&&t.removeChild(this)},e}(UIBase);__reflect(PopUpBase.prototype,"PopUpBase");var GameModel=function(){function t(){this._matchRoomDto=new MatchRoomDto}return Object.defineProperty(t.prototype,"id",{get:function(){return this.userDto.id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"matchRoomDto",{get:function(){return this._matchRoomDto},set:function(t){this._matchRoomDto.setData(t)},enumerable:!0,configurable:!0}),t}();__reflect(GameModel.prototype,"GameModel");var HandlerBase=function(){function t(){}return t.prototype.dispatch=function(t,e,r){MsgCenter.getInstance().dispatch(t,e,r)},t}();__reflect(HandlerBase.prototype,"HandlerBase");var SceneBase=function(t){function e(e){var r=t.call(this)||this;return r._stateName="SceneBase",r._controller=e,r}return __extends(e,t),e.prototype.getStateName=function(){return this._stateName},e.prototype.stateBegin=function(){},e.prototype.stateEnd=function(){this.removeChildren(),this.parent.removeChild(this)},e.prototype.stateUpdate=function(){},e}(eui.UILayer);__reflect(SceneBase.prototype,"SceneBase",["IScene"]);var PlayerBaseView=function(t){function e(){var e=t.call(this)||this;return e.bind(UIEventCode.PLAYER_ENTER,UIEventCode.PLAYER_READY,UIEventCode.GAME_START,UIEventCode.PLAYER_CHANGE_IDENTITY,UIEventCode.UPDATE_SHOW_DESK_CARDS,UIEventCode.UPDATE_SHOW_DESK_PASS),e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this)},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.init()},e.prototype.init=function(){this.setIdentity(Identity.FARMER),this.currentState="ready"},e.prototype.execute=function(t,e){switch(t){case UIEventCode.PLAYER_ENTER:if(null==this.userDto)break;var r=e;this.userDto.id==r&&this.show();break;case UIEventCode.PLAYER_READY:if(null==this.userDto)break;var n=e;this.userDto.id==n&&this.readyState();break;case UIEventCode.GAME_START:this.operShowCom.currentState="normal",this.currentState="start";break;case UIEventCode.PLAYER_CHANGE_IDENTITY:if(null==this.userDto)break;var o=e;this.userDto.id==o&&this.setIdentity(Identity.LANDLORD);break;case UIEventCode.UPDATE_SHOW_DESK_CARDS:if(null==this.userDto)break;var i=e;this.userDto.id==i.userId&&this.operShowCom.outCard(i.selectCardList);break;case UIEventCode.UPDATE_SHOW_DESK_PASS:if(null==this.userDto)break;var s=e;this.userDto.id==s&&this.operShowCom.pass()}},e.prototype.show=function(){this.visible=!0;var t=Models.gameModel.matchRoomDto;this.userDto&&t.hasReady(this.userDto.id)?this.operShowCom.hasReady():this.operShowCom.toReady()},e.prototype.readyState=function(){this.operShowCom.hasReady()},e.prototype.setIdentity=function(t){switch(t){case Identity.FARMER:this.playerImg.source="Farmer_png";break;case Identity.LANDLORD:this.playerImg.source="Landlord_png"}},e.prototype.onDispose=function(){},e}(UIBase);__reflect(PlayerBaseView.prototype,"PlayerBaseView");var ManagerBase=function(){function t(){this.dic={}}return t.prototype.execute=function(t,e){if(!this.dic[t])return void console.warn("没有注册：",+t);for(var r=this.dic[t],n=0,o=r.length;o>n;n++)r[n].execute(t,e)},t.prototype.addMul=function(t,e){for(var r=0,n=t.length;n>r;r++)this.add(t[r],e)},t.prototype.add=function(t,e){this.dic[t]=this.dic[t]||[];var r=this.dic[t];-1==r.indexOf(e)&&r.push(e)},t.prototype.removeMul=function(t,e){for(var r=0,n=t.length;n>r;r++)this.remove(t[r],e)},t.prototype.remove=function(t,e){if(!this.dic[t])return void console.log("没有这个事件："+t+"注册");for(var r=this.dic[t],n=0,o=r.length;o>n;n++)if(r[n]==e)return void r.splice(n,1);0==r.length&&delete this.dic[t]},t}();__reflect(ManagerBase.prototype,"ManagerBase",["IBase"]);var CardDto=function(){function t(t,e,r){this.name=t,this.color=e,this.weight=r}return t}();__reflect(CardDto.prototype,"CardDto");var NetEventCode;!function(t){t[t.SEND=0]="SEND"}(NetEventCode||(NetEventCode={}));var UIEventCode;!function(t){t[t.ENTER_ROOM=0]="ENTER_ROOM",t[t.SET_LEFT_PLAYER_DATA=1]="SET_LEFT_PLAYER_DATA",t[t.SET_RIGHT_PLAYER_DATA=2]="SET_RIGHT_PLAYER_DATA",t[t.PLAYER_ENTER=3]="PLAYER_ENTER",t[t.USER_LEAVE=4]="USER_LEAVE",t[t.PLAYER_LEAVE=5]="PLAYER_LEAVE",t[t.PLAYER_READY=6]="PLAYER_READY",t[t.GAME_START=7]="GAME_START",t[t.CHANGE_MULTIPLE=8]="CHANGE_MULTIPLE",t[t.TURN_GRAB=9]="TURN_GRAB",t[t.GRAB_SUCCESS=10]="GRAB_SUCCESS",t[t.PLAYER_CHANGE_IDENTITY=11]="PLAYER_CHANGE_IDENTITY",t[t.SET_TABLE_CARD=12]="SET_TABLE_CARD",t[t.INIT_MY_CARD=13]="INIT_MY_CARD",t[t.INIT_LEFT_CARD=14]="INIT_LEFT_CARD",t[t.INIT_RIGHT_CARD=15]="INIT_RIGHT_CARD",t[t.ADD_LEFT_CARD=16]="ADD_LEFT_CARD",t[t.ADD_RIGHT_CARD=17]="ADD_RIGHT_CARD",t[t.ADD_MY_CARD=18]="ADD_MY_CARD",t[t.TURN_DEAL=19]="TURN_DEAL",t[t.DEAL_CARD=20]="DEAL_CARD",t[t.HIDE_DEAL_BUTTON=21]="HIDE_DEAL_BUTTON",t[t.REMOVE_LEFT_CARD=22]="REMOVE_LEFT_CARD",t[t.REMOVE_RIGHT_CARD=23]="REMOVE_RIGHT_CARD",t[t.REMOVE_MY_CARD=24]="REMOVE_MY_CARD",t[t.UPDATE_SHOW_DESK_CARDS=25]="UPDATE_SHOW_DESK_CARDS",t[t.UPDATE_SHOW_DESK_PASS=26]="UPDATE_SHOW_DESK_PASS",t[t.UPDATE_OVER_PANEL=27]="UPDATE_OVER_PANEL"}(UIEventCode||(UIEventCode={}));var NoticeManager=function(t){function e(){var e=t.call(this)||this;return e._errorList=[],e._showErrDelay=0,e._noticeList=[],e._showNoticeDelay=0,e._rollList=[],e._isRolling=!1,e._noticeLayer=new egret.DisplayObjectContainer,e.addChild(e._noticeLayer),e._errorLayer=new egret.DisplayObjectContainer,e.addChild(e._errorLayer),e.touchChildren=!1,e.touchEnabled=!1,e}return __extends(e,t),e.prototype.addError=function(t){this._errorList.push(t),this.showError()},e.prototype.showError=function(){var t=this;if(!(this._showErrDelay>0||this._errorList.length<=0)){var e=new ErrorSprite(this._errorList.shift());e.x=.5*(this.stage.stageWidth-e.width),e.y=.5*(this.stage.stageHeight-e.height),this._errorLayer.addChild(e),this._lastError&&this._lastError.removeTween(),this._lastError=e,this._showErrDelay=Utils.TimeUtil.setTimeout(function(){t._showErrDelay=0,t.showError()},400)}},e.prototype.addNotice=function(t){this._noticeList.push(t),this.showNotice()},e.prototype.showNotice=function(){var t=this;if(!(this._showNoticeDelay>0||this._noticeList.length<=0)){var e=new NoticeSprite(this._noticeList.shift());e.x=.5*(this.stage.stageWidth-e.width),e.y=355,this._noticeLayer.addChild(e),this._lastNotice&&this._lastNotice.removeTween(),this._lastNotice=e,this._showNoticeDelay=Utils.TimeUtil.setTimeout(function(){t._showNoticeDelay=0,t.showNotice()},400)}},e.prototype.addRoll=function(t){this._rollList.push(t),this._isRolling||this.rollNext()},e.prototype.rollNext=function(){var t=this,e=this._rollList;if(e.length){this._isRolling=!0;var r=new RollSprite(e.shift());r.x=.5*(this.stage.stageWidth-r.width),r.y=164,r.once(egret.Event.REMOVED_FROM_STAGE,function(){t.rollNext()},this),this.addChild(r)}else this._isRolling=!1},e.MAX_ERROR_SHOW=3,e}(egret.DisplayObjectContainer);__reflect(NoticeManager.prototype,"NoticeManager");var ErrorSprite=function(t){function e(e){var r=t.call(this)||this;return r.tweening=0,r.width=435,r.bg=new eui.Image,r.bg.source="noticeBG",r.bg.height=57,r.bg.scale9Grid=new egret.Rectangle(31,13,209,24),r.bg.verticalCenter=0,r.bg.horizontalCenter=0,r.addChild(r.bg),r.lbl=new eui.Label,r.lbl.size=24,r.lbl.textColor=65280,r.lbl.fontFamily="微软雅黑",r.lbl.text=e,r.lbl.y=5,r.lbl.y=10,r.lbl.verticalCenter=0,r.lbl.horizontalCenter=0,r.addChild(r.lbl),r.once(egret.Event.ADDED_TO_STAGE,r.onAdd,r),r.once(egret.Event.REMOVED_FROM_STAGE,r.onRemoved,r),r}return __extends(e,t),e.prototype.onAdd=function(){var t=this;this.tweening=1,egret.Tween.get(this).to({y:this.y-150},1200).call(function(){1==t.tweening?t.tweenWait():t.tweenOut()})},e.prototype.tweenWait=function(){var t=this;this.tweening=2,egret.Tween.get(this).wait(1500).call(function(){t.tweenOut()})},e.prototype.tweenOut=function(){var t=this;egret.Tween.get(this).to({y:this.y-50},450).call(function(){t.tweening=0,Utils.DisplayUtil.removeFromParent(t)})},e.prototype.onRemoved=function(){egret.Tween.removeTweens(this)},e.prototype.removeTween=function(){2==this.tweening?this.tweenOut():this.tweening=2},e.prototype.removeNow=function(){egret.Tween.removeTweens(this),Utils.DisplayUtil.removeFromParent(this)},e}(eui.Component);__reflect(ErrorSprite.prototype,"ErrorSprite");var NoticeSprite=function(t){function e(e){var r=t.call(this)||this;return r.isWait=!0,r.tweening=0,r.width=435,r.bg=new eui.Image,r.bg.source="noticeBG",r.bg.scale9Grid=new egret.Rectangle(31,13,209,24),r.bg.verticalCenter=0,r.bg.horizontalCenter=0,r.addChild(r.bg),r.lbl=new eui.Label,r.lbl.size=20,r.lbl.textColor=16777215,r.lbl.fontFamily="微软雅黑",r.lbl.textFlow=(new egret.HtmlTextParser).parser(e),r.lbl.verticalCenter=0,r.lbl.horizontalCenter=0,r.addChild(r.lbl),r.once(egret.Event.ADDED_TO_STAGE,r.onAdd,r),r.once(egret.Event.REMOVED_FROM_STAGE,r.onRemoved,r),r}return __extends(e,t),e.prototype.onAdd=function(){var t=this;this.tweening=1,egret.Tween.get(this).to({y:this.y-150},120).call(function(){1==t.tweening?t.tweenWait():t.tweenOut()})},e.prototype.tweenWait=function(){var t=this;this.tweening=2,egret.Tween.get(this).wait(1500).call(function(){t.tweenOut()})},e.prototype.tweenOut=function(){var t=this;egret.Tween.get(this).to({y:this.y-50},450).call(function(){t.tweening=0,Utils.DisplayUtil.removeFromParent(t)})},e.prototype.removeTween=function(){2==this.tweening?this.tweenOut():this.tweening=2},e.prototype.onRemoved=function(){egret.Tween.removeTweens(this)},e.prototype.removeNow=function(){egret.Tween.removeTweens(this),Utils.DisplayUtil.removeFromParent(this)},e}(eui.Component);__reflect(NoticeSprite.prototype,"NoticeSprite");var RollSprite=function(t){function e(e){var r=t.call(this)||this;return r.width=640,r.bg=new eui.Image,r.bg.source="messageBg",r.addChild(r.bg),r.lbl=new eui.Label,r.lbl.size=20,r.lbl.textColor=65280,r.lbl.fontFamily="微软雅黑",r.lbl.textFlow=(new egret.HtmlTextParser).parser(e),r.lbl.y=6,r.lbl.x=640,r.addChild(r.lbl),r.once(egret.Event.ADDED_TO_STAGE,r.onAdd,r),r.once(egret.Event.REMOVED_FROM_STAGE,r.onRemoved,r),r}return __extends(e,t),e.prototype.onAdd=function(){var t=this,e=this.lbl,r=e.x,n=-Math.ceil(e.textWidth),o=Math.round(Math.abs(n-r)/.12);egret.Tween.get(e).to({x:n},o).call(function(){Utils.DisplayUtil.removeFromParent(t)})},e.prototype.onRemoved=function(){egret.Tween.removeTweens(this)},e}(eui.Component);__reflect(RollSprite.prototype,"RollSprite");var PopUpShowMode;!function(t){t[t.Normal=0]="Normal",t[t.ReverseChange=1]="ReverseChange",t[t.HideOther=2]="HideOther"}(PopUpShowMode||(PopUpShowMode={}));var PopUpLucencyType;!function(t){t[t.Lucency=0]="Lucency",t[t.Translucence=1]="Translucence",t[t.Impenetrable=2]="Impenetrable",t[t.Penetrate=3]="Penetrate"}(PopUpLucencyType||(PopUpLucencyType={}));var PopUpManager=function(){function t(){this._dicShowView={},this._showStack=[]}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.start=function(t,e,r){this._popUpContainer=t,this._stageWidth=e,this._stageHeight=r,this.initPopUpContainer(),this.initCover()},t.prototype.initPopUpContainer=function(){this._popUpContainer=this._popUpContainer,this._popUpContainer.x=0,this._popUpContainer.y=0,this._popUpContainer.width=this._stageWidth,this._popUpContainer.height=this._stageHeight},t.prototype.initCover=function(){this._cover=new eui.Rect(this._stageWidth,this._stageHeight,16777215),this._cover.x=0,this._cover.y=0,this._popUpContainer.addChild(this._cover),this._cover.visible=!1},t.prototype.addPopUp=function(t,e,r,n){void 0===e&&(e=PopUpShowMode.Normal),void 0===r&&(r=PopUpLucencyType.Impenetrable),void 0===n&&(n=!0);var o=this.getPopUp(t);o&&this._popUpContainer.removeChild(o);var i=new t;return n&&(i.horizontalCenter=0,i.verticalCenter=0),this._popUpContainer.addChild(i),this._dicShowView[t.prototype.constructor]=i,this._showStack.push({view:i,lucencyType:r}),this.setLucency(),i},t.prototype.removePopUp=function(t){var e=this.getPopUp(t);if(!e)throw new Error("当前没有view弹窗"+t);this._popUpContainer.removeChild(e),this._dicShowView[t.prototype.constructor]=void 0;for(var r=this._showStack.length-1;r>=0;r++)if(this._showStack[r].view==e){this._showStack.splice(r,1);break}this.setLucency()},t.prototype.removeAllPopUp=function(){this._dicShowView={},this._showStack=[],this._popUpContainer.removeChildren(),this.initCover()},t.prototype.getPopUp=function(t){return this._dicShowView[t.prototype.constructor]},t.prototype.setLucency=function(){var t=this.getTopImpenetratedIndex();if(-1==t)this._cover.visible=!1;else{var e=this._showStack[t].lucencyType;switch(e){case PopUpLucencyType.Lucency:this._cover.alpha=0,this._cover.visible=!0;break;case PopUpLucencyType.Impenetrable:this._cover.alpha=.3,this._cover.visible=!0;break;case PopUpLucencyType.Translucence:this._cover.alpha=.5,this._cover.visible=!0}this._popUpContainer.setChildIndex(this._cover,t)}},t.prototype.getTopImpenetratedIndex=function(){for(var t=this._showStack.length-1;t>=0;t--){var e=this._showStack[t].lucencyType;if(e!=PopUpLucencyType.Penetrate)return t}return-1},t._instance=null,t}();__reflect(PopUpManager.prototype,"PopUpManager");var UIManager=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.getInstance=function(){return this._instance||(this._instance=new e),this._instance},e._instance=null,e}(ManagerBase);__reflect(UIManager.prototype,"UIManager");var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,r,n){function o(t){e.call(n,t)}function i(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),r.call(n))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,i,null),RES.getResByUrl(t,o,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var Models=function(){function t(){}return t.gameModel=new GameModel,t}();__reflect(Models.prototype,"Models");var ClientPeer=function(){function t(t,e){try{this.socket=new egret.WebSocket,this.ip=t,this.port=e,this.socket.type=egret.WebSocket.TYPE_BINARY,this.socket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.onReceiveMessage,this),this.socket.addEventListener(egret.Event.CONNECT,this.onSocketOpen,this),this.socket.addEventListener(egret.Event.CLOSE,this.onSocketClose,this),this.socket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onSocketError,this),this.socket.connect(t,e)}catch(r){console.error(r)}}return t.prototype.setApplication=function(t){this.application=t},t.prototype.onSocketOpen=function(){console.log("服务器连接成功！")},t.prototype.onReceiveMessage=function(){var t=new egret.ByteArray;this.socket.readBytes(t);var e=EncodeTool.decodePacket(t);console.log("receive msg: ",e),this.processReceive(e)},t.prototype.processReceive=function(t){this.application.onReceive(t)},t.prototype.send=function(t,e,r){var n=new SocketMsg(t,e,r);console.log("send msg: ",n),this.sendMsg(n)},t.prototype.sendMsg=function(t){var e=EncodeTool.encodePacket(t);try{this.socket.writeBytes(e,0,e.bytesAvailable),this.socket.flush()}catch(r){console.error(r)}},t.prototype.onSocketClose=function(){},t.prototype.onSocketError=function(){},t}();__reflect(ClientPeer.prototype,"ClientPeer");var EncodeTool=function(){function t(){}return t.decodePacket=function(t){var e=t.readShort(),r=t.readShort(),n=t.readUTFBytes(t.bytesAvailable),o=JSON.parse(n),i=new SocketMsg(e,r,o);return i},t.encodePacket=function(t){var e=new egret.ByteArray;return e.writeShort(t.opCode),e.writeShort(t.subCode),e.writeUTF(JSON.stringify(t.value)),e.position=0,e},t}();__reflect(EncodeTool.prototype,"EncodeTool");var Game=function(){function t(){this.popUpManager=null,this.noticeManager=null,this.mSceneManage=new StateManager}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.start=function(e){this.mStage=e;var r=this.mFixContainer=new eui.Component;this.mStage.addChild(r);var n=new eui.Component;this.mStage.addChild(n);var o=this.noticeManager=new NoticeManager;this.mStage.addChild(o),this.popUpManager=PopUpManager.getInstance(),this.popUpManager.start(n,this.mStage.stageWidth,this.mStage.stageHeight),NetManager.getInstance(),t.getInstance().loadScene(StartScene)},t.prototype.loadScene=function(t){var e=new t(this.mSceneManage);this.mSceneManage.setState(e),this.popUpManager.removeAllPopUp(),this.mFixContainer.addChild(e)},t._instance=null,t}();__reflect(Game.prototype,"Game");var NetManager=function(t){function e(){var e=t.call(this)||this;return e.accountHandler=new AccountHandler,e.userHandler=new UserHandler,e.matchHandler=new MatchHandler,e.fightHandler=new FightHandler,e.clientPeer=new ClientPeer("127.0.0.1",8002),e.clientPeer.setApplication(e),e}return __extends(e,t),e.getInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.onDisconnect=function(t){},e.prototype.onReceive=function(t){switch(console.log("NetManager.onReceive: ",t),t.opCode){case OpCode.ACCOUNT:this.accountHandler.onReceive(t.subCode,t.value);break;case OpCode.USER:this.userHandler.onReceive(t.subCode,t.value);break;case OpCode.MATCH:this.matchHandler.onReceive(t.subCode,t.value);break;case OpCode.FIGHT:this.fightHandler.onReceive(t.subCode,t.value)}},e.prototype.execute=function(t,e){switch(t){case NetEventCode.SEND:this.clientPeer.sendMsg(e)}},e}(ManagerBase);__reflect(NetManager.prototype,"NetManager",["IApplication"]);var SocketMsg=function(){function t(t,e,r){this.opCode=t,this.subCode=e,this.value=r}return t.prototype.change=function(t,e,r){this.opCode=t,this.subCode=e,this.value=r},t}();__reflect(SocketMsg.prototype,"SocketMsg");var AccountHandler=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onReceive=function(t,e){switch(t){case AccountCode.LOGIN:this.loginResponse(e);break;case AccountCode.REGIST_SRES:this.registResponse(e)}},e.prototype.loginResponse=function(t){if(0==t){Game.getInstance().noticeManager.addNotice("登录成功");var e=new SocketMsg(OpCode.USER,UserCode.GET_INFO_CREQ,null);this.dispatch(AreaCode.NET,NetEventCode.SEND,e)}},e.prototype.registResponse=function(t){0==t&&Game.getInstance().noticeManager.addNotice("注册成功")},e}(HandlerBase);__reflect(AccountHandler.prototype,"AccountHandler");var FightHandler=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onReceive=function(t,e){switch(t){case FightCode.GET_CARD_SRES:this.getCards(e);break;case FightCode.TURN_GRAB_BRO:this.turnGrabBro(e);break;case FightCode.GRAB_LANDLORD_BRO:this.grabLandlordBro(e);break;case FightCode.TURN_DEAL_BRO:this.turnDealBro(e);break;case FightCode.DEAL_SRES:this.dealResponse(e);break;case FightCode.DEAL_BRO:this.dealBro(e);break;case FightCode.PASS_SRES:this.passResponse(e);break;case FightCode.PASS_BRO:this.passBro(e);break;case FightCode.OVER_BRO:this.overBro(e)}},e.prototype.getCards=function(t){this.dispatch(AreaCode.UI,UIEventCode.INIT_MY_CARD,t),this.dispatch(AreaCode.UI,UIEventCode.INIT_LEFT_CARD,null),this.dispatch(AreaCode.UI,UIEventCode.INIT_RIGHT_CARD,null),this.dispatch(AreaCode.UI,UIEventCode.CHANGE_MULTIPLE,1)},e.prototype.turnGrabBro=function(t){this.dispatch(AreaCode.UI,UIEventCode.TURN_GRAB,t)},e.prototype.grabLandlordBro=function(t){this.dispatch(AreaCode.UI,UIEventCode.GRAB_SUCCESS,t.userId),this.dispatch(AreaCode.UI,UIEventCode.PLAYER_CHANGE_IDENTITY,t.userId),this.dispatch(AreaCode.UI,UIEventCode.SET_TABLE_CARD,t.tableCardList);var e;e=t.userId==Models.gameModel.matchRoomDto.leftId?UIEventCode.ADD_LEFT_CARD:t.userId==Models.gameModel.matchRoomDto.rightId?UIEventCode.ADD_RIGHT_CARD:UIEventCode.ADD_MY_CARD,this.dispatch(AreaCode.UI,e,t)},e.prototype.turnDealBro=function(t){this.dispatch(AreaCode.UI,UIEventCode.TURN_DEAL,t)},e.prototype.dealResponse=function(t){0==t&&this.dispatch(AreaCode.UI,UIEventCode.HIDE_DEAL_BUTTON,!0)},e.prototype.dealBro=function(t){var e=-1;t.userId==Models.gameModel.matchRoomDto.leftId?e=UIEventCode.REMOVE_LEFT_CARD:t.userId==Models.gameModel.matchRoomDto.rightId?e=UIEventCode.REMOVE_RIGHT_CARD:t.userId==Models.gameModel.userDto.id&&(e=UIEventCode.REMOVE_MY_CARD),this.dispatch(AreaCode.UI,e,t.remainCardList),this.dispatch(AreaCode.UI,UIEventCode.UPDATE_SHOW_DESK_CARDS,t)},e.prototype.passResponse=function(t){0==t&&this.dispatch(AreaCode.UI,UIEventCode.HIDE_DEAL_BUTTON,!0)},e.prototype.passBro=function(t){this.dispatch(AreaCode.UI,UIEventCode.UPDATE_SHOW_DESK_PASS,t)},e.prototype.overBro=function(t){PopUpManager.getInstance().addPopUp(OverPanel,PopUpShowMode.Normal,PopUpLucencyType.Lucency,!0),this.dispatch(AreaCode.UI,UIEventCode.UPDATE_OVER_PANEL,t)},e}(HandlerBase);__reflect(FightHandler.prototype,"FightHandler");var MatchHandler=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onReceive=function(t,e){switch(t){case MatchCode.ENTER_SRES:this.enterResponse(e);break;case MatchCode.ENTER_BRO:this.enterBro(e);break;case MatchCode.LEAVE_SERS:this.leaveSres();break;case MatchCode.LEAVE_BRO:this.leaveBro(e);break;case MatchCode.READY_BRO:this.readyBro(e);break;case MatchCode.START_BRO:this.startBro()}},e.prototype.enterResponse=function(t){Models.gameModel.matchRoomDto=t,this.resetPos(),this.dispatch(AreaCode.UI,UIEventCode.ENTER_ROOM,null)},e.prototype.enterBro=function(t){var e=Models.gameModel.matchRoomDto;if(e.add(t),this.resetPos(),-1!=e.leftId){var r=e.uidUserDict[e.leftId];this.dispatch(AreaCode.UI,UIEventCode.SET_LEFT_PLAYER_DATA,r)}if(-1!=e.rightId){var n=e.uidUserDict[e.rightId];this.dispatch(AreaCode.UI,UIEventCode.SET_RIGHT_PLAYER_DATA,n)}this.dispatch(AreaCode.UI,UIEventCode.PLAYER_ENTER,t.id),Game.getInstance().noticeManager.addNotice("有新玩家 ("+t.name+" )进入")},e.prototype.leaveSres=function(){this.dispatch(AreaCode.UI,UIEventCode.USER_LEAVE,null)},e.prototype.leaveBro=function(t){this.dispatch(AreaCode.UI,UIEventCode.PLAYER_LEAVE,t),this.resetPos(),Models.gameModel.matchRoomDto.leave(t)},e.prototype.readyBro=function(t){Models.gameModel.matchRoomDto.ready(t),this.dispatch(AreaCode.UI,UIEventCode.PLAYER_READY,t)},e.prototype.startBro=function(){Game.getInstance().noticeManager.addNotice("所有玩家准备开始游戏"),this.dispatch(AreaCode.UI,UIEventCode.GAME_START,null)},e.prototype.resetPos=function(){var t=Models.gameModel,e=t.matchRoomDto;e.resetPos(t.userDto.id)},e}(HandlerBase);__reflect(MatchHandler.prototype,"MatchHandler");var UserHandler=function(t){function e(){var e=t.call(this)||this;return e.socketMsg=new SocketMsg,e}return __extends(e,t),e.prototype.onReceive=function(t,e){switch(t){case UserCode.GET_INFO_SRES:this.getInfoResponse(e);break;case UserCode.CREATE_SRES:this.createResponse(e)}},e.prototype.getInfoResponse=function(t){null==t?(console.log("没有角色 创建"),Game.getInstance().loadScene(CreateScene)):(Models.gameModel.userDto=t,Game.getInstance().loadScene(MainScene))},e.prototype.createResponse=function(t){0==t&&(this.socketMsg.change(OpCode.USER,UserCode.GET_INFO_CREQ,null),this.dispatch(AreaCode.NET,NetEventCode.SEND,this.socketMsg))},e}(HandlerBase);__reflect(UserHandler.prototype,"UserHandler");var AccountCode;!function(t){t[t.LOGIN=0]="LOGIN",t[t.REGIST_CREQ=1]="REGIST_CREQ",t[t.REGIST_SRES=2]="REGIST_SRES"}(AccountCode||(AccountCode={}));var FightCode;!function(t){t[t.GET_CARD_SRES=0]="GET_CARD_SRES",t[t.TURN_GRAB_BRO=1]="TURN_GRAB_BRO",t[t.GRAB_LANDLORD_CREQ=2]="GRAB_LANDLORD_CREQ",t[t.GRAB_LANDLORD_BRO=3]="GRAB_LANDLORD_BRO",t[t.TURN_DEAL_BRO=4]="TURN_DEAL_BRO",t[t.DEAL_CREQ=5]="DEAL_CREQ",t[t.DEAL_SRES=6]="DEAL_SRES",t[t.DEAL_BRO=7]="DEAL_BRO",t[t.PASS_CREQ=8]="PASS_CREQ",t[t.PASS_SRES=9]="PASS_SRES",t[t.PASS_BRO=10]="PASS_BRO",t[t.OVER_BRO=11]="OVER_BRO"}(FightCode||(FightCode={}));var MatchCode;!function(t){t[t.ENTER_CREQ=0]="ENTER_CREQ",t[t.ENTER_SRES=1]="ENTER_SRES",t[t.ENTER_BRO=2]="ENTER_BRO",t[t.LEAVE_CREQ=3]="LEAVE_CREQ",t[t.LEAVE_SERS=4]="LEAVE_SERS",t[t.LEAVE_BRO=5]="LEAVE_BRO",t[t.READY_CREQ=6]="READY_CREQ",t[t.READY_BRO=7]="READY_BRO",t[t.START_BRO=8]="START_BRO"}(MatchCode||(MatchCode={}));var OpCode;!function(t){t[t.ACCOUNT=0]="ACCOUNT",t[t.USER=1]="USER",t[t.MATCH=2]="MATCH",t[t.FIGHT=3]="FIGHT"}(OpCode||(OpCode={}));var UserCode;!function(t){t[t.GET_INFO_CREQ=0]="GET_INFO_CREQ",t[t.GET_INFO_SRES=1]="GET_INFO_SRES",t[t.CREATE_CREQ=2]="CREATE_CREQ",t[t.CREATE_SRES=3]="CREATE_SRES",t[t.ONLINE_CREQ=4]="ONLINE_CREQ",t[t.ONLINE_SRES=5]="ONLINE_SRES"}(UserCode||(UserCode={}));var CardColor=function(){function t(){}return t.getString=function(e){switch(e){case t.CLUB:return"Club";case t.HEART:return"Heart";case t.SPADE:return"Spade";case t.SQUARE:return"Square";default:throw new Error("不存在这样的花色")}},t.NONE=0,t.CLUB=1,t.HEART=2,t.SPADE=3,t.SQUARE=4,t}();__reflect(CardColor.prototype,"CardColor");var CardType=function(){function t(){}return t.isSingle=function(t){return 1===t.length},t.isDouble=function(t){return 2==t.length&&t[0].weight==t[1].weight?!0:!1},t.isStraight=function(t){if(t.length<5||t.length>12)return!1;for(var e=0;e<t.length-1;e++){var r=t[e].weight;if(t[e+1].weight-r!=1)return!1;if(r>CardWeight.ONE||t[e+1].weight>CardWeight.ONE)return!1}return!0},t.isDoubleStraight=function(t){if(t.length<6||t.length%2!=0)return!1;for(var e=0;e<t.length-2;e+=2){if(t[e].weight!=t[e+1].weight)return!1;if(t[e+2].weight-t[e].weight!=1)return!1;if(t[e].weight>CardWeight.ONE||t[e+1].weight>CardWeight.ONE)return!1}return!0},t.isTripleStraight=function(t){if(t.length<6||t.length%3!=0)return!1;for(var e=0;e<t.length-3;e+=3){if(t[e].weight!=t[e+1].weight||t[e+1].weight!=t[e+1].weight)return!1;if(t[e+3].weight-t[e].weight!=1)return!1;if(t[e].weight>CardWeight.ONE||t[e+3].weight>CardWeight.ONE)return!1}return!0},t.isThree=function(t){return 3!=t.length?!1:t[0].weight!=t[1].weight||t[1].weight!=t[2].weight?!1:!0},t.isThreeAndOne=function(t){return 4!=t.length?!1:t[0].weight==t[1].weight&&t[1].weight==t[2].weight&&t[2].weight!=t[3].weight?!0:t[1].weight==t[2].weight&&t[2].weight==t[3].weight&&t[0].weight!=t[1].weight?!0:!1},t.isThreeAndTwo=function(t){if(5!=t.length)return!1;if(t[0].weight==t[1].weight&&t[1].weight==t[2].weight){if(t[3].weight==t[4].weight)return!0}else if(t[2].weight==t[3].weight&&t[3].weight==t[4].weight&&t[0].weight==t[1].weight)return!0;return!1},t.isBoom=function(t){return 4!=t.length?!1:t[0].weight==t[1].weight&&t[1].weight==t[2].weight&&t[2].weight==t[3].weight?!0:!1},t.isJokerBoom=function(t){return 2!=t.length?!1:t[0].weight==CardWeight.SJOKER&&t[1].weight==CardWeight.LJOKER?!0:t[0].weight==CardWeight.LJOKER&&t[1].weight==CardWeight.SJOKER?!0:!1},t.getCardType=function(e){var r=t.NONE;switch(e.length){case 1:this.isSingle(e)&&(r=t.SINGLE);break;case 2:this.isDouble(e)?r=t.DOUBLE:this.isJokerBoom(e)&&(r=t.JOKER_BOOM);break;case 3:this.isThree(e)&&(r=t.THREE);break;case 4:this.isBoom(e)?r=t.BOOM:this.isThreeAndOne(e)&&(r=t.THREE_ONE);break;case 5:this.isStraight(e)?r=t.STRAIGHT:this.isThreeAndTwo(e)&&(r=t.THREE_TWO);break;case 6:this.isStraight(e)?r=t.STRAIGHT:this.isDoubleStraight(e)?r=t.DOUBLE_STRAIGHT:this.isTripleStraight(e)&&(r=t.TRIPLE_STRAIGHT);break;case 7:this.isStraight(e)&&(r=t.STRAIGHT);break;case 8:this.isStraight(e)?r=t.STRAIGHT:this.isDoubleStraight(e)&&(r=t.DOUBLE_STRAIGHT);break;case 9:this.isStraight(e)?r=t.STRAIGHT:this.isTripleStraight(e)&&(r=t.TRIPLE_STRAIGHT);break;case 10:this.isStraight(e)?r=t.STRAIGHT:this.isDoubleStraight(e)&&(r=t.DOUBLE_STRAIGHT);break;case 11:this.isStraight(e)&&(r=t.STRAIGHT);break;case 12:this.isStraight(e)?r=t.STRAIGHT:this.isDoubleStraight(e)?r=t.DOUBLE_STRAIGHT:this.isTripleStraight(e)&&(r=t.TRIPLE_STRAIGHT);break;case 13:break;case 14:this.isDoubleStraight(e)&&(r=t.DOUBLE_STRAIGHT);break;case 15:this.isTripleStraight(e)&&(r=t.TRIPLE_STRAIGHT);break;case 16:this.isDoubleStraight(e)&&(r=t.DOUBLE_STRAIGHT);break;case 17:break;case 18:this.isDoubleStraight(e)?r=t.DOUBLE_STRAIGHT:this.isTripleStraight(e)&&(r=t.TRIPLE_STRAIGHT);break;case 19:break;case 20:this.isDoubleStraight(e)&&(r=t.DOUBLE_STRAIGHT)}return r},t.NONE=0,t.SINGLE=1,t.DOUBLE=2,t.STRAIGHT=3,t.DOUBLE_STRAIGHT=4,t.TRIPLE_STRAIGHT=5,t.THREE=6,t.THREE_ONE=7,t.THREE_TWO=8,t.BOOM=9,t.JOKER_BOOM=10,t}();__reflect(CardType.prototype,"CardType");var CardWeight=function(){function t(){}return t.getString=function(t){switch(t){case 3:return"Three";case 4:return"Four";case 5:return"Five";case 6:return"Six";case 7:return"Seven";case 8:return"Eight";case 9:return"Nine";case 10:return"Ten";case 11:return"Jack";case 12:return"Queen";case 13:return"King";case 14:return"One";case 15:return"Two";case 16:return"SJoker";case 17:return"LJoker";default:throw new Error("不存在这样的权值")}},t.getWeight=function(t,e){var r=0;if(e==CardType.THREE_ONE||e==CardType.THREE_TWO)for(var n=0;n<t.length-2;n++)t[n].weight==t[n+1].weight&&t[n+1].weight==t[n+2].weight&&(r+=3*t[n].weight);else for(var n=0;n<t.length;n++)r+=t[n].weight;return r},t.THREE=3,t.FOUR=4,t.FIVE=5,t.SIX=6,t.SEVEN=7,t.EIGHT=8,t.NINE=9,t.TEN=10,t.JACK=11,t.QUEEN=12,t.KING=13,t.ONE=14,t.TWO=15,t.SJOKER=16,t.LJOKER=17,t}();__reflect(CardWeight.prototype,"CardWeight");var Identity=function(){function t(){}return t.getString=function(t){return 0==t?"农名":"地主"},t.FARMER=0,t.LANDLORD=1,t}();__reflect(Identity.prototype,"Identity");var AccountDto=function(){function t(t,e){this.account=t,this.password=e}return t}();__reflect(AccountDto.prototype,"AccountDto");var GrabDto=function(){function t(t,e,r){this.userId=t,this.tableCardList=e,this.playerCardList=r}return t}();__reflect(GrabDto.prototype,"GrabDto");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,r){function n(n){e.call(r,n,t)}if(RES.hasRes(t)){var o=RES.getRes(t);o?n(o):RES.getResAsync(t,n,this)}else RES.getResByUrl(t,n,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var UserDto=function(){function t(t,e,r,n,o,i,s,a){this.id=t,this.name=e,this.been=r,this.winCount=n,this.loseCount=o,this.runCount=i,this.lv=s,this.exp=a
}return t}();__reflect(UserDto.prototype,"UserDto");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.setProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var DealDto=function(){function t(t,e){this.selectCardList=t,this.length=t.length,this.type=CardType.getCardType(t),this.weight=CardWeight.getWeight(t,this.type),this.userId=e,this.isRegular=this.type!=CardType.NONE,this.remainCardList=[]}return t}();__reflect(DealDto.prototype,"DealDto");var OverDto=function(){function t(){}return t}();__reflect(OverDto.prototype,"OverDto");var PlayerDto=function(){function t(t){this.cardList=[],this.identity=Identity.FARMER,this.userId=t,this.cardList=[]}return t.prototype.add=function(t){this.cardList.push(t)},t}();__reflect(PlayerDto.prototype,"PlayerDto");var Main=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.isThemeLoadEnd=!1,e.isResourceLoadEnd=!1,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/")},e.prototype.onConfigComplete=function(){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},e.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},e.prototype.onResourceLoadComplete=function(t){"preload"==t.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},e.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&Game.getInstance().start(this.stage)},e.prototype.onItemLoadError=function(t){console.warn("Url:"+t.resItem.url+" has failed to load")},e.prototype.onResourceLoadError=function(t){console.warn("Group:"+t.groupName+" has failed to load"),this.onResourceLoadComplete(t)},e.prototype.onResourceProgress=function(t){"preload"==t.groupName&&this.loadingView.setProgress(t.itemsLoaded,t.itemsTotal)},e}(eui.UILayer);__reflect(Main.prototype,"Main");var StateManager=function(){function t(){this._runBegin=!1}return t.prototype.setState=function(t){this._runBegin=!1,null!=this._state&&this._state.stateEnd(),this._state=t,this.stateUpdate()},t.prototype.stateUpdate=function(){null!==this._state&&0==this._runBegin&&(this._state.stateBegin(),this._runBegin=!0),null!=this._state&&this._state.stateUpdate()},t}();__reflect(StateManager.prototype,"StateManager");var CreateScene=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.stateBegin=function(){t.prototype.stateBegin.call(this),this.init()},e.prototype.init=function(){this.addChild(new CreateView)},e}(SceneBase);__reflect(CreateScene.prototype,"CreateScene");var FightScene=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.stateBegin=function(){t.prototype.stateBegin.call(this),this.init()},e.prototype.init=function(){this.addChild(new FightView)},e}(SceneBase);__reflect(FightScene.prototype,"FightScene");var MainScene=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.stateBegin=function(){t.prototype.stateBegin.call(this),this.init()},e.prototype.init=function(){this.addChild(new MainView)},e}(SceneBase);__reflect(MainScene.prototype,"MainScene");var StartScene=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.stateBegin=function(){t.prototype.stateBegin.call(this),this.init()},e.prototype.init=function(){this.addChild(new StartView)},e}(SceneBase);__reflect(StartScene.prototype,"StartScene");var ChatView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=ChatSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.onDispose=function(){},e}(UIBase);__reflect(ChatView.prototype,"ChatView");var CreateView=function(t){function e(){var e=t.call(this)||this;return e.socketMsg=new SocketMsg,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=CreateSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btnCreate.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCreate,this)},e.prototype.onCreate=function(){""==this.inputName.text&&Game.getInstance().noticeManager.addError("请正确输入您的名称"),this.socketMsg.change(OpCode.USER,UserCode.CREATE_CREQ,this.inputName.text),this.dispatch(AreaCode.NET,NetEventCode.SEND,this.socketMsg)},e}(UIBase);__reflect(CreateView.prototype,"CreateView");var FightView=function(t){function e(){var e=t.call(this)||this;return e.bind(UIEventCode.GAME_START),e}return __extends(e,t),e.prototype.execute=function(t,e){switch(t){case UIEventCode.GAME_START:this.tableView=new TableView,this.addChild(this.tableView)}},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=FightSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btnChat.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onChat,this),this.initPlayer(),this.refresh()},e.prototype.initPlayer=function(){this.leftPlayer=new LeftPlayerView,this.addChild(this.leftPlayer),this.rightPlayer=new RightPlayerView,this.addChild(this.rightPlayer),this.userPlayer=new UserPlayerView,this.addChild(this.userPlayer)},e.prototype.refresh=function(){this.lblBeen.text="x "+Models.gameModel.userDto.been;var t=Models.gameModel.matchRoomDto;if(-1!=t.leftId){var e=t.uidUserDict[t.leftId];this.dispatch(AreaCode.UI,UIEventCode.SET_LEFT_PLAYER_DATA,e),this.leftPlayer.show()}else this.leftPlayer.visible=!1;if(-1!=t.rightId){var r=t.uidUserDict[t.rightId];this.dispatch(AreaCode.UI,UIEventCode.SET_RIGHT_PLAYER_DATA,r),this.rightPlayer.show()}else this.rightPlayer.visible=!1},e.prototype.onChat=function(){this.chatView.visible=!this.chatView.visible},e}(UIBase);__reflect(FightView.prototype,"FightView");var MainView=function(t){function e(){var e=t.call(this)||this;return e.socketMsg=new SocketMsg,e.bind(UIEventCode.ENTER_ROOM,UIEventCode.USER_LEAVE),e}return __extends(e,t),e.prototype.execute=function(e,r){switch(t.prototype.execute.call(this,e,r),e){case UIEventCode.ENTER_ROOM:this.enterRoom();break;case UIEventCode.USER_LEAVE:this.leaveRoom()}},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=MainSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btnMatch.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMatch,this),this.btnCancel.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCancel,this),this.btnEnter.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onEnter,this),this.btnSetting.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onSetting,this),this.refresh()},e.prototype.refresh=function(){var t=Models.gameModel.userDto;this.lblName.text=t.name,this.lblLv.text="Lv."+t.id,this.lblBeen.text="x "+t.been},e.prototype.onMatch=function(){this.socketMsg.change(OpCode.MATCH,MatchCode.ENTER_CREQ,null),this.dispatch(AreaCode.NET,NetEventCode.SEND,this.socketMsg)},e.prototype.onCancel=function(){this.socketMsg.change(OpCode.MATCH,MatchCode.LEAVE_CREQ,null),this.dispatch(AreaCode.NET,NetEventCode.SEND,this.socketMsg)},e.prototype.onSetting=function(){Game.getInstance().popUpManager.addPopUp(SettingPanel)},e.prototype.enterRoom=function(){this.currentState="matching"},e.prototype.leaveRoom=function(){this.currentState="normal"},e.prototype.onEnter=function(){Game.getInstance().loadScene(FightScene)},e}(UIBase);__reflect(MainView.prototype,"MainView");var StartView=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=StartSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btnStart.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onStart,this),this.btnRegist.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRegist,this)},e.prototype.onStart=function(){PopUpManager.getInstance().addPopUp(LoginPanel,PopUpShowMode.Normal,PopUpLucencyType.Lucency,!0)},e.prototype.onRegist=function(){PopUpManager.getInstance().addPopUp(RegistPanel,PopUpShowMode.Normal,PopUpLucencyType.Lucency,!0)},e}(UIBase);__reflect(StartView.prototype,"StartView");var TableView=function(t){function e(){var e=t.call(this)||this;return e.bind(UIEventCode.SET_TABLE_CARD),e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=TableSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.execute=function(t,e){switch(t){case UIEventCode.SET_TABLE_CARD:this.setTableCards(e)}},e.prototype.setTableCards=function(t){for(var e=0;e<this.cardGroup.numChildren;e++){var r=this.cardGroup.getChildAt(e);r.source=t[e].name+"_png"}},e.prototype.onDispose=function(){},e}(UIBase);__reflect(TableView.prototype,"TableView");var LeftPlayerView=function(t){function e(){var e=t.call(this)||this;return e.bind(UIEventCode.SET_LEFT_PLAYER_DATA,UIEventCode.ADD_LEFT_CARD,UIEventCode.GAME_START),e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=LeftPlayerSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.execute=function(e,r){switch(t.prototype.execute.call(this,e,r),e){case UIEventCode.SET_LEFT_PLAYER_DATA:this.userDto=r;break;case UIEventCode.ADD_LEFT_CARD:}},e.prototype.onDispose=function(){},e}(PlayerBaseView);__reflect(LeftPlayerView.prototype,"LeftPlayerView");var CardCtrl=function(t){function e(){return t.call(this)||this}return __extends(e,t),Object.defineProperty(e.prototype,"cardDto",{get:function(){return this.mCardDto},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selected",{get:function(){return this.mSelected},set:function(t){this.mSelected=t,this.currentState=1==this.mSelected?"selected":"normal"},enumerable:!0,configurable:!0}),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=CardSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.cardImg.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onMouseDown,this)},e.prototype.init=function(t,e){this.mCardDto=t,this.isMine=e,1==this.selected&&(this.selected=!1);var r="";r=e?t.name+"_png":"CardBack_png",this.cardImg.source=r},e.prototype.onMouseDown=function(){0!=this.isMine&&(this.selected=!this.mSelected)},e}(UIBase);__reflect(CardCtrl.prototype,"CardCtrl");var RightPlayerView=function(t){function e(){var e=t.call(this)||this;return e.bind(UIEventCode.SET_RIGHT_PLAYER_DATA,UIEventCode.ADD_RIGHT_CARD),e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=RightPlayerSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.execute=function(e,r){switch(t.prototype.execute.call(this,e,r),e){case UIEventCode.SET_RIGHT_PLAYER_DATA:this.userDto=r;break;case UIEventCode.ADD_RIGHT_CARD:}},e.prototype.onDispose=function(){},e}(PlayerBaseView);__reflect(RightPlayerView.prototype,"RightPlayerView");var UserPlayerView=function(t){function e(){var e=t.call(this)||this;return e.socketMsg=new SocketMsg,e.bind(UIEventCode.PLAYER_READY,UIEventCode.GAME_START,UIEventCode.TURN_GRAB,UIEventCode.ADD_MY_CARD,UIEventCode.PLAYER_CHANGE_IDENTITY,UIEventCode.GRAB_SUCCESS,UIEventCode.TURN_DEAL,UIEventCode.HIDE_DEAL_BUTTON,UIEventCode.UPDATE_SHOW_DESK_CARDS,UIEventCode.UPDATE_SHOW_DESK_PASS),e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=UserPlayerSkin},e.prototype.execute=function(e,r){switch(t.prototype.execute.call(this,e,r),e){case UIEventCode.PLAYER_READY:var n=r;Models.gameModel.userDto.id==n&&this.readyState();break;case UIEventCode.GAME_START:var o=new MyPlayerCtrl;this.addChild(o),this.operCom.normal();break;case UIEventCode.TURN_GRAB:var n=r;n==Models.gameModel.userDto.id?this.operCom.grab():this.operCom.normal();break;case UIEventCode.PLAYER_CHANGE_IDENTITY:var n=r;n==Models.gameModel.userDto.id&&this.setIdentity(Identity.LANDLORD);break;case UIEventCode.ADD_MY_CARD:break;case UIEventCode.GRAB_SUCCESS:var n=r;n==Models.gameModel.userDto.id&&this.operCom.normal();break;case UIEventCode.TURN_DEAL:var n=r;n==Models.gameModel.userDto.id?this.operCom.outCard():this.operCom.normal();break;case UIEventCode.HIDE_DEAL_BUTTON:this.operCom.normal();break;case UIEventCode.UPDATE_SHOW_DESK_CARDS:var i=r;i.userId==Models.gameModel.userDto.id&&this.operShowCom.outCard(i.selectCardList);break;case UIEventCode.UPDATE_SHOW_DESK_PASS:var n=r;n==Models.gameModel.userDto.id&&this.operShowCom.pass()}},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.operCom.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onOperComClick,this)},e.prototype.readyState=function(){t.prototype.readyState.call(this),this.operCom.normal()},e.prototype.onOperComClick=function(t){switch(console.log("onOperComClick: ",t),t.target.name){case"btnReady":this.onReady();break;case"btnGrab":this.onGrab();break;case"btnUnGrab":this.onUnGrab();break;case"btnOutCard":this.onOutCard();break;case"btnPass":this.onPass()}},e.prototype.onReady=function(){this.socketMsg.change(OpCode.MATCH,MatchCode.READY_CREQ,null),this.dispatch(AreaCode.NET,NetEventCode.SEND,this.socketMsg)},e.prototype.onGrab=function(){this.socketMsg.change(OpCode.FIGHT,FightCode.GRAB_LANDLORD_CREQ,!0),this.dispatch(AreaCode.NET,NetEventCode.SEND,this.socketMsg)},e.prototype.onUnGrab=function(){this.socketMsg.change(OpCode.FIGHT,FightCode.GRAB_LANDLORD_CREQ,!1),this.dispatch(AreaCode.NET,NetEventCode.SEND,this.socketMsg)},e.prototype.onOutCard=function(){this.dispatch(AreaCode.UI,UIEventCode.DEAL_CARD,null)},e.prototype.onPass=function(){this.socketMsg.change(OpCode.FIGHT,FightCode.PASS_CREQ,null),this.dispatch(AreaCode.NET,NetEventCode.SEND,this.socketMsg)},e.prototype.onDispose=function(){},e}(PlayerBaseView);__reflect(UserPlayerView.prototype,"UserPlayerView");var OperCom=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.ready=function(){this.currentState="ready"},e.prototype.normal=function(){this.currentState="normal"},e.prototype.outCard=function(){this.currentState="outCard"},e.prototype.grab=function(){this.currentState="grab"},e}(eui.Component);__reflect(OperCom.prototype,"OperCom");var OperShowCom=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.normal=function(){this.currentState="normal"},e.prototype.hasReady=function(){this.currentState="text",this.operLabel.text="已准备"},e.prototype.toReady=function(){this.currentState="normal"},e.prototype.outCard=function(t){this.currentState="outcard",this.updateCards(t)},e.prototype.pass=function(){this.currentState="text",this.operLabel.text="PASS"},e.prototype.updateCards=function(t){var e=t.length,r=this.outArea.numChildren,n=e-r;if(n>=0){for(var o=0;r>o;o++){var i=this.outArea.getChildAt(o);i.init(t[o],!0),i.visible=i.includeInLayout=!0}for(var o=r;e>o;o++){var i=new CardCtrl;this.outArea.addChild(i),i.init(t[o],!0),i.visible=i.includeInLayout=!0}}else{for(var o=0;e>o;o++){var i=this.outArea.getChildAt(o);i.init(t[o],!0),i.visible=i.includeInLayout=!0}for(var o=e;r>o;o++){var i=this.outArea.getChildAt(o);i.visible=i.includeInLayout=!1}}},e}(eui.Component);__reflect(OperShowCom.prototype,"OperShowCom");var LoginPanel=function(t){function e(){var e=t.call(this)||this;return e.socketMsg=new SocketMsg,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=LoginSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btnLogin.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onLogin,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.onLogin=function(){var t=this.inputAccount.text,e=this.inputPwd.text;if(""==t)return void Game.getInstance().noticeManager.addError("登录的用户名不能为空！");if(""==e)return void Game.getInstance().noticeManager.addError("登录的密码不能为空！");if(e.length<4||e.length>16)return void Game.getInstance().noticeManager.addError("登录的密码长度不合法，应该在4-16个字符之内！");var r=new AccountDto(t,e);this.socketMsg.change(OpCode.ACCOUNT,AccountCode.LOGIN,r),this.dispatch(AreaCode.NET,NetEventCode.SEND,this.socketMsg)},e.prototype.close=function(){PopUpManager.getInstance().removePopUp(e)},e.prototype.onDispose=function(){},e}(PopUpBase);__reflect(LoginPanel.prototype,"LoginPanel");var OverPanel=function(t){function e(){var e=t.call(this)||this;return e.socketMsg=new SocketMsg,e.bind(UIEventCode.UPDATE_OVER_PANEL),e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=OverSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btnBack.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onBack,this)},e.prototype.execute=function(t,e){switch(t){case UIEventCode.UPDATE_OVER_PANEL:this.refreshPanel(e)}},e.prototype.refreshPanel=function(t){this.lblWinIdentity.text=Identity.getString(t.winIdentity),-1!=t.winUidList.indexOf(Models.gameModel.id)?(this.lblWinIdentity.text+="胜利",this.lblWinBeen.text="欢乐豆：+"):(this.lblWinIdentity.text+="失败",this.lblWinBeen.text="欢乐豆：-"),this.lblWinBeen.text+=t.beenCount},e.prototype.onBack=function(){Game.getInstance().loadScene(MainScene),this.socketMsg.change(OpCode.USER,UserCode.GET_INFO_CREQ,null),this.dispatch(AreaCode.NET,NetEventCode.SEND,this.socketMsg)},e.prototype.onDispose=function(){},e}(PopUpBase);__reflect(OverPanel.prototype,"OverPanel");var RegistPanel=function(t){function e(){var e=t.call(this)||this;return e.socketMsg=new SocketMsg,e}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=RegistSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this),this.btnRegist.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onRegist,this),this.btnClose.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},e.prototype.onRegist=function(){var t=this.inputAccount.text,e=this.inputPwd.text,r=this.inputPwdRepeat.text;if(""==t)return void Game.getInstance().noticeManager.addError("用户名不能为空");if(""==e||e.length<4||e.length>16)return void Game.getInstance().noticeManager.addError("密码不合法");if(""==r||r!=e)return void Game.getInstance().noticeManager.addError("两次输入的密码不一致");var n=new AccountDto(t,e);this.socketMsg.change(OpCode.ACCOUNT,AccountCode.REGIST_CREQ,n),this.dispatch(AreaCode.NET,0,this.socketMsg)},e.prototype.close=function(){PopUpManager.getInstance().removePopUp(e)},e.prototype.onDispose=function(){},e}(PopUpBase);__reflect(RegistPanel.prototype,"RegistPanel");var SettingPanel=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=SettingSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.onDispose=function(){},e}(PopUpBase);__reflect(SettingPanel.prototype,"SettingPanel");var AreaCode;!function(t){t[t.UI=0]="UI",t[t.NET=1]="NET"}(AreaCode||(AreaCode={}));var MyPlayerCtrl=function(t){function e(){var e=t.call(this)||this;return e.socketMsg=new SocketMsg,e.bind(UIEventCode.INIT_MY_CARD,UIEventCode.ADD_MY_CARD,UIEventCode.DEAL_CARD,UIEventCode.REMOVE_MY_CARD),e}return __extends(e,t),e.prototype.setCards=function(t){this.mCards=t,this.updateCardsCtrl()},e.prototype.execute=function(t,e){switch(t){case UIEventCode.INIT_MY_CARD:this.setCards(e);break;case UIEventCode.ADD_MY_CARD:var r=e;this.setCards(r.playerCardList);break;case UIEventCode.DEAL_CARD:this.dealSelectCard();break;case UIEventCode.REMOVE_MY_CARD:this.setCards(e)}},e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.skinName=MyPlayerSkin},e.prototype.childrenCreated=function(){t.prototype.childrenCreated.call(this)},e.prototype.updateCardsCtrl=function(){var t=this.mCards,e=t.length,r=this.cardGroup.numChildren,n=e-r;if(n>=0){for(var o=0;r>o;o++){var i=this.cardGroup.getChildAt(o);i.init(t[o],!0),i.visible=!0}for(var o=r;e>o;o++){var i=new CardCtrl;this.cardGroup.addChild(i),i.init(t[o],!0),i.visible=!0}}else{for(var o=0;e>o;o++){var i=this.cardGroup.getChildAt(o);i.init(t[o],!0),i.visible=!0}for(var o=e;r>o;o++){var i=this.cardGroup.getChildAt(o);i.visible=!1}}},e.prototype.dealSelectCard=function(){var t=this.getSelectCard(),e=new DealDto(t,Models.gameModel.id);return 0==e.isRegular?void Game.getInstance().noticeManager.addError("请选择合理的手牌！"):(this.socketMsg.change(OpCode.FIGHT,FightCode.DEAL_CREQ,e),void this.dispatch(AreaCode.NET,NetEventCode.SEND,this.socketMsg))},e.prototype.getSelectCard=function(){for(var t=[],e=this.mCards.length-1;e>=0;e--){var r=this.cardGroup.getChildAt(e);1==r.selected&&t.push(r.cardDto)}return t},e}(UIBase);__reflect(MyPlayerCtrl.prototype,"MyPlayerCtrl");var MsgCenter=function(){function t(){}return t.getInstance=function(){return this._instance||(this._instance=new t),this._instance},t.prototype.execute=function(){},t.prototype.dispatch=function(t,e,r){switch(t){case AreaCode.UI:UIManager.getInstance().execute(e,r);break;case AreaCode.NET:NetManager.getInstance().execute(e,r)}},t._instance=null,t}();__reflect(MsgCenter.prototype,"MsgCenter",["IBase"]);var Utils;!function(t){var e=function(){function t(){}return t.removeRepeat=function(t){for(var e=[],r=0;r<t.length;r++){for(var n=!0,o=t[r],i=0;i<e.length;i++)if(o===e[i]){n=!1;break}n&&e.push(o)}return e},t.intersection=function(t,e){for(var r=[],n=0;n<e.length;n++)for(var o=e[n],i=0;i<t.length;i++)if(o===t[i]){r.push(o);break}return this.removeRepeat(r)},t.union=function(t,e){return this.removeRepeat(t.concat(e))},t.difference=function(t,e){for(var r=t.slice(0),n=0;n<e.length;n++)for(var o=e[n],i=0;i<r.length;i++)o===r[i]&&r.splice(i,1);return this.removeRepeat(r)},t.getDeletionNums=function(t,e,r){for(var n=[],o=0,i=e;r>=i;i++)t[o]!==i?n.push(i):o++;return n},t.find=function(t,e,r){if(t instanceof Array==0)return t[e]==r?t:null;var n;n="string"==typeof e?function(t){return t[e]==r}:e;for(var o in t)if(1==n.call(null,t[o]))return t[o];return null},t.findAll=function(t,e,r){var n;n="string"==typeof e?function(t){return t[e]==r}:e;var o=[];for(var i in t)1==n.call(null,t[i])&&o.push(t[i]);return o},t}();t.ArrayUtil=e,__reflect(e.prototype,"Utils.ArrayUtil")}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.getClassName=function(t){return t.prototype.constructor.name},t.getClassNameByObj=function(t){var e=t.constructor;return e.name},t.clone=function(t){var e=t instanceof Array?[]:{};if("object"!=typeof t)return t;if(JSON){var r=JSON.stringify(t);e=JSON.parse(r)}else for(var n in t)e[n]="object"==typeof t[n]?arguments.callee(t[n]):t[n];return e},t}();t.CommonUtil=e,__reflect(e.prototype,"Utils.CommonUtil")}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.disabledButtonTimeout=function(t,e){void 0===e&&(e=700),t.touchEnabled=!1,t.alpha=.7,setTimeout(function(){t.touchEnabled=!0,t.alpha=1},e)},t.fastAddChild=function(t,e){e.$parent!=t&&(e.$parent&&this.fastRemoveFromParent(e),t.$children.push(e),e.$parent=t)},t.fastAddChildAt=function(t,e,r){e.$parent!=t&&(e.$parent&&this.fastRemoveFromParent(e),t.$children.splice(r,0,e),e.$parent=t)},t.fastRemoveFromParent=function(t){if(t&&t.$parent){var e=t.$parent.$children.indexOf(t);t.$parent.$children.splice(e,1),t.$parent=null}},t.fastRemoveChildAt=function(t,e){var r=t.$children[e];r&&(t.$children.splice(e,1),r.$parent=null,r.visible=!1)},t.fastRemoveAllChild=function(t){for(;t.$children.length;)this.fastRemoveChildAt(t,0)},t.removeFromParent=function(t){t&&t.parent&&t.parent.removeChild(t)},t.addToContainer=function(t,e,r,n){void 0===r&&(r=-1),void 0===n&&(n=!1),(0==e.contains(t)||n)&&(-1!=r?e.addChildAt(t,r):e.addChild(t))},t.generalScaleImageEffect=function(t,e,r,n){var o=this;void 0===r&&(r=.5),void 0===n&&(n=.5);var i=new eui.Image(t);e.addChild(i),i.anchorOffsetX=.5*i.width,i.anchorOffsetY=.5*i.height,i.x=e.width*r,i.y=e.height*n,i.scaleX=i.scaleY=2,egret.Tween.get(i).to({scaleX:1,scaleY:1},500,egret.Ease.cubicIn).call(function(){var t=i.y-200;egret.Tween.get(i).to({y:t,alpha:0},300).call(function(){o.removeFromParent(i)},o)},this)},t.generalAlphaOutImageEffect=function(t,e,r,n){var o=this;void 0===r&&(r=.5),void 0===n&&(n=.5);var i=new eui.Image(t);e.addChild(i),i.anchorOffsetX=.5*i.width,i.anchorOffsetY=.5*i.height,i.x=e.width*r,i.y=e.height*n,egret.Tween.get(i).wait(1e3).call(function(){egret.Tween.get(i).to({alpha:0},300).call(function(){o.removeFromParent(i)},o)},this)},t.fontFly=function(t,e,r,n,o){var i=this;void 0===e&&(e=50),void 0===r&&(r=60),void 0===n&&(n=15),void 0===o&&(o=1);var s=new egret.Point;s.x=t.x-(r+this.getRD(r)),s.y=t.y-(e+this.getRD(n)),o>1&&egret.Tween.get(t).to({scaleX:o,scaleY:o},300,egret.Ease.circOut).to({scaleX:o-.2,scaleY:o-.2},300,egret.Ease.circOut),egret.Tween.get(t).to({y:s.y,x:s.x},800,egret.Ease.circOut).to({y:s.y-20},200,egret.Ease.circOut).call(function(){egret.Tween.removeTweens(t),i.removeFromParent(t)})},t.getRD=function(t){return t*Math.random()},t.sortChildren=function(t){if(t&&0!=t.length&&t[0].parent)for(var e=t[0].parent,r=-1,n=0,o=t.length;o>n;n++){if(!t[n].parent||t[n].parent!=e)return;if(o-1>=n+1)for(r=n;r+1>0;){var i=e.getChildIndex(t[r]),s=e.getChildIndex(t[r+1]);if(r--,!(i>s))break;e.swapChildrenAt(i,s)}}},t.flyText=function(t,e,r,n,o,i){var s=this;void 0===o&&(o=16777215),void 0===i&&(i=700);var a=new eui.Label(t);a.fontFamily="微软雅黑",a.size=24,a.textColor=o,a.x=r,a.y=n,e.addChild(a),egret.Tween.get(a).to({y:n-60},i,egret.Ease.circOut).call(function(){s.removeFromParent(a)})},t.fixSetProvider=function(t,e){if(t.dataProvider){var r=t.dataProvider;r.replaceAll(e.source)}else t.dataProvider=e},t}();t.DisplayUtil=e,__reflect(e.prototype,"Utils.DisplayUtil")}(Utils||(Utils={}));var Log=function(){function t(){}return t}();__reflect(Log.prototype,"Log"),Log.debug=console.log.bind(console),Log.warn=console.warn.bind(console),Log.error=console.error.bind(console);var md5=function(){function t(){this.hexcase=0,this.b64pad=""}return t.prototype.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.prototype.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.prototype.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.prototype.any_hmac_md5=function(t,e,r){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),r)},t.prototype.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.prototype.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.prototype.rstr_hmac_md5=function(t,e){var r=this.rstr2binl(t);r.length>16&&(r=this.binl_md5(r,8*t.length));for(var n=Array(16),o=Array(16),i=0;16>i;i++)n[i]=909522486^r[i],o[i]=1549556828^r[i];var s=this.binl_md5(n.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(o.concat(s),640))},t.prototype.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var r,n=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",o="",i=0;i<t.length;i++)r=t.charCodeAt(i),o+=n.charAt(r>>>4&15)+n.charAt(15&r);return o},t.prototype.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n="",o=t.length,i=0;o>i;i+=3)for(var s=t.charCodeAt(i)<<16|(o>i+1?t.charCodeAt(i+1)<<8:0)|(o>i+2?t.charCodeAt(i+2):0),a=0;4>a;a++)n+=8*i+6*a>8*t.length?this.b64pad:r.charAt(s>>>6*(3-a)&63);return n},t.prototype.rstr2any=function(t,e){var r,n,o,i,s,a=e.length,h=Array(Math.ceil(t.length/2));for(r=0;r<h.length;r++)h[r]=t.charCodeAt(2*r)<<8|t.charCodeAt(2*r+1);var c=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),l=Array(c);for(n=0;c>n;n++){for(s=Array(),i=0,r=0;r<h.length;r++)i=(i<<16)+h[r],o=Math.floor(i/a),i-=o*a,(s.length>0||o>0)&&(s[s.length]=o);l[n]=i,h=s}var d="";for(r=l.length-1;r>=0;r--)d+=e.charAt(l[r]);return d},t.prototype.str2rstr_utf8=function(t){for(var e,r,n="",o=-1;++o<t.length;)e=t.charCodeAt(o),r=o+1<t.length?t.charCodeAt(o+1):0,e>=55296&&56319>=e&&r>=56320&&57343>=r&&(e=65536+((1023&e)<<10)+(1023&r),o++),127>=e?n+=String.fromCharCode(e):2047>=e?n+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?n+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(n+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return n},t.prototype.str2rstr_utf16le=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(255&t.charCodeAt(r),t.charCodeAt(r)>>>8&255);return e},t.prototype.str2rstr_utf16be=function(t){for(var e="",r=0;r<t.length;r++)e+=String.fromCharCode(t.charCodeAt(r)>>>8&255,255&t.charCodeAt(r));return e},t.prototype.rstr2binl=function(t){for(var e=Array(t.length>>2),r=0;r<e.length;r++)e[r]=0;for(var r=0;r<8*t.length;r+=8)e[r>>5]|=(255&t.charCodeAt(r/8))<<r%32;return e},t.prototype.binl2rstr=function(t){for(var e="",r=0;r<32*t.length;r+=8)e+=String.fromCharCode(t[r>>5]>>>r%32&255);return e},t.prototype.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var r=1732584193,n=-271733879,o=-1732584194,i=271733878,s=0;s<t.length;s+=16){var a=r,h=n,c=o,l=i;r=this.md5_ff(r,n,o,i,t[s+0],7,-680876936),i=this.md5_ff(i,r,n,o,t[s+1],12,-389564586),o=this.md5_ff(o,i,r,n,t[s+2],17,606105819),n=this.md5_ff(n,o,i,r,t[s+3],22,-1044525330),r=this.md5_ff(r,n,o,i,t[s+4],7,-176418897),i=this.md5_ff(i,r,n,o,t[s+5],12,1200080426),o=this.md5_ff(o,i,r,n,t[s+6],17,-1473231341),n=this.md5_ff(n,o,i,r,t[s+7],22,-45705983),r=this.md5_ff(r,n,o,i,t[s+8],7,1770035416),i=this.md5_ff(i,r,n,o,t[s+9],12,-1958414417),o=this.md5_ff(o,i,r,n,t[s+10],17,-42063),n=this.md5_ff(n,o,i,r,t[s+11],22,-1990404162),r=this.md5_ff(r,n,o,i,t[s+12],7,1804603682),i=this.md5_ff(i,r,n,o,t[s+13],12,-40341101),o=this.md5_ff(o,i,r,n,t[s+14],17,-1502002290),n=this.md5_ff(n,o,i,r,t[s+15],22,1236535329),r=this.md5_gg(r,n,o,i,t[s+1],5,-165796510),i=this.md5_gg(i,r,n,o,t[s+6],9,-1069501632),o=this.md5_gg(o,i,r,n,t[s+11],14,643717713),n=this.md5_gg(n,o,i,r,t[s+0],20,-373897302),r=this.md5_gg(r,n,o,i,t[s+5],5,-701558691),i=this.md5_gg(i,r,n,o,t[s+10],9,38016083),o=this.md5_gg(o,i,r,n,t[s+15],14,-660478335),n=this.md5_gg(n,o,i,r,t[s+4],20,-405537848),r=this.md5_gg(r,n,o,i,t[s+9],5,568446438),i=this.md5_gg(i,r,n,o,t[s+14],9,-1019803690),o=this.md5_gg(o,i,r,n,t[s+3],14,-187363961),n=this.md5_gg(n,o,i,r,t[s+8],20,1163531501),r=this.md5_gg(r,n,o,i,t[s+13],5,-1444681467),i=this.md5_gg(i,r,n,o,t[s+2],9,-51403784),o=this.md5_gg(o,i,r,n,t[s+7],14,1735328473),n=this.md5_gg(n,o,i,r,t[s+12],20,-1926607734),r=this.md5_hh(r,n,o,i,t[s+5],4,-378558),i=this.md5_hh(i,r,n,o,t[s+8],11,-2022574463),o=this.md5_hh(o,i,r,n,t[s+11],16,1839030562),n=this.md5_hh(n,o,i,r,t[s+14],23,-35309556),r=this.md5_hh(r,n,o,i,t[s+1],4,-1530992060),i=this.md5_hh(i,r,n,o,t[s+4],11,1272893353),o=this.md5_hh(o,i,r,n,t[s+7],16,-155497632),n=this.md5_hh(n,o,i,r,t[s+10],23,-1094730640),r=this.md5_hh(r,n,o,i,t[s+13],4,681279174),i=this.md5_hh(i,r,n,o,t[s+0],11,-358537222),o=this.md5_hh(o,i,r,n,t[s+3],16,-722521979),n=this.md5_hh(n,o,i,r,t[s+6],23,76029189),r=this.md5_hh(r,n,o,i,t[s+9],4,-640364487),i=this.md5_hh(i,r,n,o,t[s+12],11,-421815835),o=this.md5_hh(o,i,r,n,t[s+15],16,530742520),n=this.md5_hh(n,o,i,r,t[s+2],23,-995338651),r=this.md5_ii(r,n,o,i,t[s+0],6,-198630844),i=this.md5_ii(i,r,n,o,t[s+7],10,1126891415),o=this.md5_ii(o,i,r,n,t[s+14],15,-1416354905),n=this.md5_ii(n,o,i,r,t[s+5],21,-57434055),r=this.md5_ii(r,n,o,i,t[s+12],6,1700485571),i=this.md5_ii(i,r,n,o,t[s+3],10,-1894986606),o=this.md5_ii(o,i,r,n,t[s+10],15,-1051523),n=this.md5_ii(n,o,i,r,t[s+1],21,-2054922799),r=this.md5_ii(r,n,o,i,t[s+8],6,1873313359),i=this.md5_ii(i,r,n,o,t[s+15],10,-30611744),o=this.md5_ii(o,i,r,n,t[s+6],15,-1560198380),n=this.md5_ii(n,o,i,r,t[s+13],21,1309151649),r=this.md5_ii(r,n,o,i,t[s+4],6,-145523070),i=this.md5_ii(i,r,n,o,t[s+11],10,-1120210379),o=this.md5_ii(o,i,r,n,t[s+2],15,718787259),n=this.md5_ii(n,o,i,r,t[s+9],21,-343485551),r=this.safe_add(r,a),n=this.safe_add(n,h),o=this.safe_add(o,c),i=this.safe_add(i,l)
}return[r,n,o,i]},t.prototype.md5_cmn=function(t,e,r,n,o,i){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(n,i)),o),r)},t.prototype.md5_ff=function(t,e,r,n,o,i,s){return this.md5_cmn(e&r|~e&n,t,e,o,i,s)},t.prototype.md5_gg=function(t,e,r,n,o,i,s){return this.md5_cmn(e&n|r&~n,t,e,o,i,s)},t.prototype.md5_hh=function(t,e,r,n,o,i,s){return this.md5_cmn(e^r^n,t,e,o,i,s)},t.prototype.md5_ii=function(t,e,r,n,o,i,s){return this.md5_cmn(r^(e|~n),t,e,o,i,s)},t.prototype.safe_add=function(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r},t.prototype.bit_rol=function(t,e){return t<<e|t>>>32-e},t}();__reflect(md5.prototype,"md5");var Utils;!function(t){var e=function(){function t(){}return t.to16=function(t,e,r){void 0===e&&(e=4),void 0===r&&(r="0x");for(var n=t.toString(16);n.length<e;)n="0"+n;return n=r+n},t.getUint32Low16=function(t){return 65535&t},t.getUint32High16=function(t){return(4294901760&t)>>16},t.getUint16Low8=function(t){return 255&t},t.getUint16High8=function(t){return(65280&t)>>8},t.clamp=function(t,e,r){return void 0!==e&&null!==e&&(t=Math.min(t,e)),void 0!==r&&null!==r&&(t=Math.max(t,r)),t},t.fixNumberByAddZeroAtPrefix=function(t,e){for(var r=e-(t+"").length,n="",o=0;r>o;o++)n+="0";return n+=t},t}();t.NumberUtil=e,__reflect(e.prototype,"Utils.NumberUtil")}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.multiSplit=function(t,e){function r(t,e,n){var o=e[n];if(o&&t)for(var i in t){var s=t[i];s.indexOf(o)>=0&&(t[i]=r(s.split(o),e,n+1))}return t}if(t){var n=r([t],e,0)[0];return n==t?[n]:n}return[]},t.toHtml=function(e){for(var r=t.htmlParser.parser(e),n=0,o=r;n<o.length;n++){var i=o[n],s=i.style;s&&"undefined"!=typeof s.href&&(s.underline=!0)}return r},t.getChinaTimeFormat=function(t,e,r){void 0===e&&(e=!0),void 0===r&&(r=!0);var n=new Date;n.setTime(1e3*t);var o,i=n.getDate();o=10>i?"0"+i:""+i;var s,a=n.getMonth()+1;s=10>a?"0"+a:""+a;var h;return h=e?r?n.getFullYear()+"年"+s+"月"+o+"日"+n.getHours()+"时"+n.getMinutes()+"分"+n.getSeconds()+"秒":n.getFullYear()+"年"+s+"月"+o+"日"+n.getHours()+"时"+n.getMinutes()+"分":n.getFullYear()+"年"+s+"月"+o+"日"},t.getTimeFromSecsInHour=function(t){var e,r=Math.floor(t/3600),n=Math.floor(t%3600/60),o=t%3600%60;return e=0!=r?r.toString()+"时":"",e=10>n?0==r&&0==n?"":e+"0"+n.toString()+"分":e+n.toString()+"分",e=10>o?e+"0"+o.toString()+"秒":e+o.toString()+"秒"},t.formatDate=function(t,e){t=Math.floor(t);var r=this.dateHelper;r.setTime(1e3*t);var n={"M+":r.getMonth()+1,"d+":r.getDate(),"h+":r.getHours(),"m+":r.getMinutes(),"s+":r.getSeconds(),"q+":Math.floor((r.getMonth()+3)/3),S:r.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(r.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in n)new RegExp("("+o+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return e},t.getTimeFromSecs=function(t){if(0==t)return"00:00";var e,r=Math.floor(t/3600),n=Math.floor(t%3600/60),o=Math.floor(t%3600%60);return e=0!=r?r.toString()+":":"",e=10>n?e+"0"+n.toString()+":":e+n.toString()+":",10>o?e=e+"0"+o.toString():e+=o.toString(),e},t.getTimeFromSecsInDay=function(t){var e="";return e=t>86400?Math.floor(t/86400).toString()+"天"+Math.floor(t%86400/3600).toString()+"小时":t>3600?Math.floor(t/3600).toString()+"小时"+Math.floor(t%3600/60).toString()+"分"+Math.floor(t%3600%60).toString()+"秒":t>=60?Math.floor(t%3600/60).toString()+"分"+Math.floor(t%3600%60).toString()+"秒":Math.floor(t%3600%60).toString()+"秒"},t.getTimeMoreThanDay=function(t){var e=Math.floor(t/86400),r="";return e>0&&(r=e+"天"),r+this.getTimeUnitFromSecs(Math.floor(t%86400))},t.getTimeMoreThanDayNoSec=function(t){var e=Math.floor(t/86400),r="";return e>0&&(r=e+"天"),r+this.getTimeUnitFromMinu(Math.floor(t%86400))},t.getTimeUnitFromSecs=function(t,e){void 0===e&&(e=0);var r=Math.floor(t/3600),n=Math.floor(t%3600/60),o=t%3600%60,i="";return i=0!=r?r.toString()+(0==e?"时":":"):"",i=10>n?0==r&&0==n?"":i+"0"+n.toString()+(0==e?"分":":"):i+n.toString()+(0==e?"分":":"),i=10>o?i+"0"+o.toString()+(0==e?"秒":""):i+o.toString()+(0==e?"秒":"")},t.getTimeUnitFromMinu=function(t){var e,r=Math.floor(t/3600),n=Math.floor(t%3600/60);return e=0!=r?r.toString()+"时":"",e=10>n?0==r&&0==n?"0分":e+"0"+n.toString()+"分":e+n.toString()+"分"},t.getUTCTimeFormat=function(t,e){void 0===e&&(e=!0);var r=new Date;r.setTime(1e3*t);var n=Math.floor(r.getDate()),o="";o=10>n?"0"+n:""+n;var i=Math.floor(r.getMonth())+1,s="";s=10>i?"0"+i:""+i;var a="";return a=e?r.getFullYear()+"-"+s+"-"+o+" "+r.getHours()+":"+r.getMinutes()+":"+r.getSeconds():r.getFullYear()+"-"+s+"-"+o},t.trim=function(t){return this.ltrim(this.rtrim(t))},t.ltrim=function(t){for(var e=t.length,r=0;e>r;r++)if(t.charCodeAt(r)>32)return t.substring(r);return""},t.rtrim=function(t){for(var e=t.length,r=e;r>0;r--)if(t.charCodeAt(r-1)>32)return t.substring(0,r);return""},t.format=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var n=t.indexOf("$");-1!=n&&e.length>0;)t=t.substring(0,n)+e.shift()+t.substring(n+1),n=t.indexOf("$");return t},t.format2=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return""},t.replaceStrColor=function(t,e){void 0===e&&(e="#FFFFFF");var r=t.match(/#[0-9,a-f,A-F]{6}/g);if(r)for(var n=[],o=0,i=r.length;i>o;o++){var s=r[o];n[s]||(n[s]=!0,t=this.replaceGanN(t),t=t.split(s).join("</font><font color='"+s+"'>"))}return t=t.split("#magenta").join("</font><font color='#ff00ff'>"),t=t.split("#realgreen").join("</font><font color='#00ff00'>"),t=t.split("#realblue").join("</font><font color='#4badeb'>"),t=t.split("#yellow").join("</font><font color='#ffff00'>"),t=t.split("#white").join("</font><font color='#ffffff'>"),t=t.split("#green").join("</font><font color='#a5ff18'>"),t=t.split("#black").join("</font><font color='#000000'>"),t=t.split("#blue").join("</font><font color='#4BADEB'>"),t=t.split("#purple").join("</font><font color='#C54FD7'>"),t=t.split("#red").join("</font><font color='#ff0021'>"),t=t.split("#pink").join("</font><font color='#FFCCFF'>"),t=t.split("#CO3").join("</font><font color='#db4ec5'>"),t=t.split("#orange").join("</font><font color='#FFCC00'>"),"<font color='"+e+"'>"+t+"</font>"},t.replaceGanN=function(t){var e=t.replace(/\\n/g,"\n");return e},t.replaceKN=function(t){var e=t.replace(/\{n\}/g,"\n");return e},t.split2=function(t,e,r){var n;if(t){var o=t.split(e);if(o){for(var i in o)o[i]=o[i].split(r);n=o}}return n},t.parseCInt=function(t){for(var e=["零","一","二","三","四","五","六","七","八","九"],r=["","十","百","千"],n=["","万","亿","兆"],o=[],i=String(t),s=0;s<i.length;s++)o.unshift(i.charAt(s));for(var a,h=[],c=0,l=0,s=0;s<o.length;s++)a=o[s],"0"==a?h.length>0&&h[h.length-1]!=e[0]&&h.push(e[0]):(c>0&&h.push(r[c]),0==c&&h.push(n[l]),h.push(e[a])),3==c&&(c=-1,l++),c++;return h=h.reverse(),h.join("")},t.containsEmoji=function(t){for(var e=t.length,r=0;e>r;r++){var n=t.charCodeAt(r);if(this.isEmojiCharacter(n))return!0}return!1},t.isEmojiCharacter=function(t){return t>=9728&&10175>=t||12349==t||8265==t||8252==t||t>=8192&&8207>=t||t>=8232&&8239>=t||8287==t||t>=8293&&8303>=t||t>=8448&&8527>=t||t>=8960&&9215>=t||t>=11008&&11263>=t||t>=10496&&10623>=t||t>=12800&&13055>=t||t>=55296&&57343>=t||t>=57344&&63743>=t||t>=65024&&65039>=t||t>=65536||32==t},t.gameNumToString=function(t){if(t>1e8){var e=Math.floor(t/1e6)/100;return(-1==String(e).indexOf(".")?e:e.toFixed(2))+"亿"}if(t>1e4){var r=Math.floor(t/100)/100;return(-1==String(r).indexOf(".")?r:r.toFixed(2))+"万"}return(-1==String(t).indexOf(".")?t:t.toFixed(2))+""},t.htmlParser=new egret.HtmlTextParser,t.dateHelper=new Date,t}();t.StringUtil=e,__reflect(e.prototype,"Utils.StringUtil")}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.setTimeout=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=t,i=e,s=r;return setTimeout.apply(void 0,[o,i].concat(s))},t.clearTimeout=function(t){clearTimeout(t)},t.setInterval=function(t,e){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var o=t,i=e,s=r;return setInterval.apply(void 0,[o,i].concat(s))},t.clearInterval=function(t){clearInterval(t)},t.wait=function(t){return new Promise(function(e,r){setTimeout(e,t)})},t}();t.TimeUtil=e,__reflect(e.prototype,"Utils.TimeUtil")}(Utils||(Utils={}));var vec2;!function(t){function e(t,e){return new E(t.x+e.x,t.y+e.y)}function r(t,e){return Math.sqrt((t.x-e.x)*(t.x-e.x)+(t.y-e.y)*(t.y-e.y))}function n(t,e){return t.x*e.x+t.y*e.y}function o(t,e,r){return new E((1-r)*t.x+r*e.x,(1-r)*t.y+r*e.y)}function i(t){var e=1/u(t);t.x*=e,t.y*=e}function s(t,e){return new E(t.x*e,t.y*e)}function a(t,e){return h(c(t,e))}function h(t){return t.x*t.x+t.y*t.y}function c(t,e){return new E(t.x-e.x,t.y-e.y)}function l(t){return new egret.Point(t.x,t.y)}function d(t,e,r){t.x=e,t.y=r}function u(t){return Math.sqrt(t.x*t.x+t.y*t.y)}function p(t,e,r){return(1-r)*t+r*e}function f(t,e){return o(t,e,.5)}function _(t){return new E(egret.NumberUtils.cos(t),-egret.NumberUtils.sin(t))}function g(t){return Math.atan2(-t.y,t.x)}t.add=e,t.distance=r,t.dot=n,t.lerp=o,t.normalize=i,t.scale=s,t.distanceSq=a,t.lengthSq=h,t.sub=c,t.v2p=l,t.fill=d,t.length=u,t.lerpN=p,t.middlePoint=f,t.forAngle=_,t.toAngle=g;var E=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.equals=function(t){return this.x==t.x&&this.y==t.y},t}();t.Point=E,__reflect(E.prototype,"vec2.Point"),t.pZero=new E(0,0),t.pOne=new E(1,1)}(vec2||(vec2={}));